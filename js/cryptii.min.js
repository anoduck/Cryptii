//
// Cryptii
// 2014-11-07
//
var Cryptii=Cryptii||{};jQuery(function(){"use strict";new Cryptii.Application});var Cryptii=Cryptii||{};!function(a){"use strict";var b=function(){this._init.apply(this,arguments)};a.Adam=b,b.prototype._init=function(){this._delegates=[]},b.prototype.addDelegate=function(a){-1===this._delegates.indexOf(a)&&this._delegates.push(a)},b.prototype.removeDelegate=function(a){var b=this._delegates.indexOf(a);-1!==b&&this._delegates.splice(b,1)},b.prototype.delegate=function(a){if(void 0!==a&&this._delegates.length>0){for(var b=[this],c=1;c<arguments.length;c++)b.push(arguments[c]);for(var c=0;c<this._delegates.length;c++){var d=this._delegates[c];void 0!==d[a]&&d[a].apply(d,b)}}}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Application=c,c.prototype._init=function(){b.prototype._init.apply(this,arguments),this._applicationView=new a.ApplicationView,this._conversation=new a.Conversation(this._applicationView),this._applicationView.getSideView().addDelegate(this),this._conversation.registerFormat([a.TextFormat,a.DecimalFormat,a.BinaryFormat,a.HexadecimalFormat,a.OctalFormat]),this._conversation.setBlocks([84,104,101,32,113,117,105,99,107,32,98,114,111,119,110,32,102,111,120,32,106,117,109,112,115,32,111,118,101,114,32,49,51,32,108,97,122,121,32,100,111,103,115,46]),this._tickTimer=null,this._applicationView.getDeckView().addCardView(new a.IntroductionCardView),this._conversation.updateLocation(),this._applicationView.focus(),this._setTickTimerEnabled(!0),void 0!==document.hidden&&document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this)),this._conversation.addFormat(new a.TextFormat),this._conversation.addFormat(new a.DecimalFormat),this._conversation.addFormat(new a.BinaryFormat),this._conversation.addFormat(new a.HexadecimalFormat),this._conversation.addFormat(new a.OctalFormat)},c.prototype._setTickTimerEnabled=function(a){null!==this._tickTimer!==a&&(a?this._tickTimer=setInterval(this.tick.bind(this),1e3):(clearInterval(this._tickTimer),this._tickTimer=null))},c.prototype.tick=function(){this._applicationView.tick()},c.prototype.onVisibilityChange=function(){this._setTickTimerEnabled(!document.hidden)},c.prototype.onSideViewFormatSelect=function(a,b){this._conversation.addFormat(new b)}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Conversation=c,c.prototype._init=function(c){b.prototype._init.apply(this,arguments),this._applicationView=c,this._registeredFormats=[],this._formats=[],this._blocks=[],this._difference=[],this._location=new a.Location,this._location.addDelegate(this),this._applicationView.getDeckView().addDelegate(this)},c.prototype.addFormat=function(b){b instanceof a.Format&&-1===this._formats.indexOf(b)&&(this._formats.push(b),b.setConversation(this),b.convert(this._blocks,this.calculateDifference()),this._applicationView.getDeckView().addCardView(b.getCardView()))},c.prototype.registerFormat=function(a,b){if(void 0===b&&(b=!0),"[object Array]"!==Object.prototype.toString.call(a)){var c=new a,d=c.getSlug();this._registeredFormats[d]={Format:a,name:c.getName()}}else for(var e=a,f=0;f<e.length;f++)this.registerFormat(e[f],!1);if(b){var g=this._applicationView.getSideView();g.updateRegisteredFormats(this._registeredFormats)}},c.prototype.getBlocks=function(){return this._blocks},c.prototype.setBlocks=function(a,b){var c=this.calculateDifference(a,this._blocks);if(null!==c){this._blocks=a;for(var d=0;d<this._formats.length;d++)this._formats[d]!==b&&this._formats[d].convert(this._blocks,c);this._difference=c}},c.prototype.calculateDifference=function(b,c){void 0===b&&(b=this._blocks);var d=b.length,e=0,f=0;if(null!==c&&void 0!==c){for(d=Math.min(c.length,d);d>e&&c[e]==b[e];)e++;for(;d-e>f&&c[c.length-f-1]===b[b.length-f-1];)f++;if(0==f&&e==d-1&&c.length==b.length&&c[e]==b[e])return null}for(var g=[],h=e;h<b.length-f;h++)g.push(b[h]);return new a.Difference(e,f,g)},c.prototype.updateLocation=function(){for(var a="/",b=0;b<this._formats.length;b++){var c=this._formats[b];a+=(b>0?"+":"")+c.getSlug();var d=c.getOptions();for(var e in d){var f=d[e];f.isDefaultValue()||(a+="~"+e+"="+f.getEscapedValue())}}this._location.setUrl(a)},c.prototype.onFormatContentChange=function(a,b){this.setBlocks(b,a)},c.prototype.onFormatOptionChange=function(){this.updateLocation()},c.prototype.onFormatRemove=function(a){var b=this._formats.indexOf(a);-1!==b&&this._formats.splice(b,1)}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Difference=c,c.prototype._init=function(a,c,d){b.prototype._init.apply(this,arguments),this._startOffset=a,this._endOffset=c,this._blocks=d},c.prototype.getStartOffset=function(){return this._startOffset},c.prototype.getEndOffset=function(){return this._endOffset},c.prototype.getBlocks=function(){return this._blocks}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Format=c,c.prototype._init=function(){b.prototype._init.apply(this,arguments),this._cardView=null,this._conversation=null,this._options={}},c.prototype._createCardView=function(){return null},c.prototype.getName=function(){return"Untitled"},c.prototype.getSlug=function(){var a=this.getName();a=a.toLowerCase(),a=a.replace(/ /g,"-");var b={ä:"a",à:"a",á:"a",ë:"e",è:"e",é:"e",ü:"u",ù:"u",ú:"u",ö:"o",ò:"o",ó:"o"};for(var c in b)a=a.replace(new RegExp(c,"g"),b[c]);return a},c.prototype.interpret=function(){return[]},c.prototype.convert=function(){},c.prototype.registerOption=function(a,b){this._options[a]=b,b.addDelegate(this)},c.prototype.onOptionChange=function(){this.convert(this._conversion.getBlocks(),this._conversion.calculateDifference()),this._conversion.onFormatOptionChange(this)},c.prototype.onCardViewClose=function(){this._conversion.onFormatRemove(this)},c.prototype.setConversation=function(a){this._conversion=a},c.prototype.getCardView=function(){return null===this._cardView&&(this._cardView=this._createCardView(),this._cardView.addDelegate(this)),this._cardView},c.prototype.getOptionValue=function(a){return this._options[a].getValue()},c.prototype.getOptions=function(){return this._options}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Location=c,c.prototype._useHashFallback=function(){return""==location.hostname||void 0===window.history},c.prototype.setUrl=function(a){this._useHashFallback()?location.href="#!"+a:history.replaceState({},null,a)},c.prototype.getUrl=function(){!this._useHashFallback()}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Option=c,c.prototype._init=function(a,c){b.prototype._init.apply(this,arguments),this._optionView=null,this._label=a,this._defaultValue=c,this._value=c},c.prototype._createOptionView=function(){return new a.TextOptionView(this)},c.prototype.isValueValid=function(){return!0},c.prototype.getEscapedValue=function(){return encodeURIComponent(this.getValue()).replace(/~/g,"%7e")},c.prototype.isDefaultValue=function(){return this._value==this._defaultValue},c.prototype.setValue=function(a){return this.isValueValid(a)?(this._value=a,!0):!1},c.prototype.getOptionView=function(){return null===this._optionView&&(this._optionView=this._createOptionView()),this._optionView},c.prototype.onOptionViewChange=function(a,b){this._value=b,this.delegate("onOptionChange",b)},c.prototype.getValue=function(){return this._value},c.prototype.getLabel=function(){return this._label}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a){"use strict";var b=a.Adam,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.Range=c,c.prototype._init=function(a,c){b.prototype._init.apply(this,arguments),this._start=a,this._end=c},c.prototype.isEqualTo=function(a){return null!=a&&a.getStart()==this.getStart()&&a.getEnd()==this.getEnd()},c.prototype.getStart=function(){return this._start},c.prototype.getLength=function(){return this._end-this._start},c.prototype.getEnd=function(){return this._end}}(Cryptii,jQuery);var Cryptii=Cryptii||{};!function(a,b){"use strict";var c=a.Adam,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.View=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._$element=null},d.prototype._build=function(){var a=b("<div></div>");return a},d.prototype.getElement=function(){return null===this._$element&&(this._$element=this._build()),this._$element},d.prototype.forceRepaint=function(){var a=this._$element[0];a.style.display="none",a.offsetHeight,a.style.display=""}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.Format,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.TextFormat=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._blockMeta=[]},d.prototype._createCardView=function(){var b=new a.TextFormatCardView(this);return b.getComposerView().addDelegate(this),b},d.prototype.getName=function(){return"Text"},d.prototype._getSeparator=function(){return null},d.prototype._getSeparatorLength=function(){return null!==this._getSeparator()?this._getSeparator().length:0},d.prototype.createBlockElement=function(a,c){return b(null!==a?"<b></b>":"<i></i>").text(c)},d.prototype.createSeparatorElement=function(){var a=this._getSeparator();return null===a?null:b("<u>"+a+"</u>")},d.prototype.interpretBlock=function(a){return a.charCodeAt(0)},d.prototype.convertBlock=function(a){return String.fromCharCode(a)},d.prototype.blockRangeByContentRange=function(b){for(var c=this._getSeparatorLength(),d=0,e=0,f=null;d<this._blockMeta.length&&e<b.getEnd();)d+=1,e+=this._blockMeta[d].content.length+c,null===f&&e>b.getStart()&&(f=d);return new a.Range(f,d)},d.prototype.contentRangeByBlockRange=function(b){for(var c=this._getSeparatorLength(),d=0,e=null,f=0;f<b.getEnd();f++)d+=this._blockMeta[f].content.length+c,f==b.getStart()&&(e=d);return new a.Range(e,d)},d.prototype.interpret=function(a){var b=this._getSeparator(),c=this.getHighlighterElement();c.empty();for(var d=[],e=[],f=null===b?a:a.split(b),g=0;g<f.length;g++){var h=f[g],i=this.interpretBlock(h),j=this.createBlockElement(i,h),k=this.createSeparatorElement();c.append(j,k),e.push(i),d.push({content:""+h,element:j,separatorElement:k})}return this._blockMeta=d,e},d.prototype.convert=function(a,b){var c=this._getSeparator(),d=this._getSeparatorLength(),e=this.getComposerView(),f=this.getHighlighterElement(),g=e.getContent(),h=g,i=g;if(b.getStartOffset()!=this._blockMeta.length){for(var j=0,k=0;k<b.getStartOffset();k++)j+=this._blockMeta[k].content.length+d;h=g.substr(0,j)}if(b.getEndOffset()!=this._blockMeta.length){for(var l=g.length,k=0;k<b.getEndOffset();k++)l-=this._blockMeta[this._blockMeta.length-1-k].content.length+d;i=g.substr(l)}for(var m=h,k=this._blockMeta.length-b.getEndOffset()-1;k>=b.getStartOffset();k--)this._blockMeta[k].element.remove(),null!==this._blockMeta[k].separatorElement&&this._blockMeta[k].separatorElement.remove(),this._blockMeta.splice(k,1);for(var n=[],o=b.getBlocks(),k=0;k<o.length;k++){var p=b.getStartOffset()+k,q=o[k],r=this.convertBlock(q),s=this.createBlockElement(q,r),t=this.createSeparatorElement();m+=r,n.push(s[0]),null!==c&&(m+=c,n.push(t[0])),this._blockMeta.splice(p,0,{content:""+r,element:s,separatorElement:t})}if(b.getStartOffset()>0){var u=this._blockMeta[b.getStartOffset()-1],v=null!==u.separatorElement?u.separatorElement:u.element;v.after(n)}else f.prepend(n);m+=i,e.forceRepaint(),e.setContent(m)},d.prototype.getComposerView=function(){return this.getCardView().getComposerView()},d.prototype.getHighlighterElement=function(){return this.getCardView().getComposerView().getHighlighterElement()},d.prototype.onComposerViewChange=function(a,b){var c=(new Date).getTime(),d=this.interpret(b);this._conversion.onFormatContentChange(this,d);var e=(new Date).getTime()-c;console.log("Time: "+e+"ms")},d.prototype.onComposerViewSelect=function(){}}(Cryptii,jQuery),function(a){"use strict";var b=a.TextFormat,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.DecimalFormat=c,c.prototype._init=function(){b.prototype._init.apply(this,arguments),this.registerOption("separator",new a.Option("Separator"," "))},c.prototype.getName=function(){return"Decimal"},c.prototype._getSeparator=function(){return this.getOptionValue("separator")},c.prototype.interpretBlock=function(a){return isNaN(a)?null:parseInt(a)},c.prototype.convertBlock=function(a){return a}}(Cryptii,jQuery),function(a){"use strict";var b=a.DecimalFormat,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.BinaryFormat=c,c.prototype.getName=function(){return"Binary"},c.prototype.interpretBlock=function(a){var b=parseInt(a,2);return isNaN(b)?null:b},c.prototype.convertBlock=function(a){return a.toString(2)}}(Cryptii,jQuery),function(a){"use strict";var b=a.DecimalFormat,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.HexadecimalFormat=c,c.prototype.getName=function(){return"Hexadecimal"},c.prototype.interpretBlock=function(a){var b=parseInt(a,16);return isNaN(b)?null:b},c.prototype.convertBlock=function(a){return a.toString(16)}}(Cryptii,jQuery),function(a){"use strict";var b=a.DecimalFormat,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.OctalFormat=c,c.prototype.getName=function(){return"Octal"},c.prototype.interpretBlock=function(a){var b=parseInt(a,8);return isNaN(b)?null:b},c.prototype.convertBlock=function(a){return a.toString(8)}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.ApplicationView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._$main=null,this._sideView=null,this._deckView=null,this._sideVisible=!1,b("body").append(this.getElement())},d.prototype._build=function(){var a=c.prototype._build.apply(this).attr("id","application");return this._$main=b("<div></div>").attr("id","main").append(b("<button></button>").addClass("hamburger").click(function(){this.toggleSide()}.bind(this)),this.getDeckView().getElement(),b("<div></div>").addClass("overlay").click(function(){this.toggleSide()}.bind(this))),a.append(this.getSideView().getElement(),this._$main),a},d.prototype.toggleSide=function(){this._sideVisible=!this._sideVisible,this._sideVisible?(this.getSideView().setHidden(!1),setTimeout(function(){this._$element.addClass("side-visible")}.bind(this),10)):(this._$element.removeClass("side-visible"),setTimeout(function(){this.getSideView().setHidden(!0)}.bind(this),400))},d.prototype.tick=function(){null!==this._deckView&&this._deckView.tick(),null!==this._sideView&&this._sideView.tick()},d.prototype.focus=function(){this.getDeckView().focus()},d.prototype.onSideViewClose=function(){this.toggleSide()},d.prototype.getSideView=function(){return null===this._sideView&&(this._sideView=new a.SideView,this._sideView.addDelegate(this)),this._sideView},d.prototype.getDeckView=function(){return null===this._deckView&&(this._deckView=new a.DeckView),this._deckView}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.CardView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._deckView=null},d.prototype._build=function(){var a=c.prototype._build.apply(this);return a.addClass("card").append(this._buildHeader(),this._buildContent(),this._buildFooter()),a},d.prototype._buildHeader=function(){return b("<div></div>").addClass("header").append(this._buildRightToolbar())},d.prototype._buildRightToolbar=function(){return b("<div></div>").addClass("toolbar").addClass("right").append(b("<a></a>").attr({href:"javascript:void(0);"}).on("click",b.proxy(function(){this.close()},this)).addClass("item").addClass("close"))},d.prototype._buildContent=function(){return b("<div></div>").addClass("content")},d.prototype._buildFooter=function(){return b("<div></div>").addClass("footer")},d.prototype.clearAnimations=function(){this.getElement().removeClass("animation-intro").removeClass("animation-outro")},d.prototype.triggerIntroAnimation=function(){this.getElement().addClass("animation-intro"),setTimeout(function(){this.clearAnimations()}.bind(this),500)},d.prototype.triggerOutroAnimation=function(){this.getElement().addClass("animation-outro")},d.prototype.setDeckView=function(a){this._deckView!==a&&(this._deckView=a,null===a&&this.onClose())},d.prototype.close=function(){null!==this._deckView&&(this.triggerOutroAnimation(),setTimeout(function(){this.clearAnimations(),this._deckView.removeCardView(this)}.bind(this),500))},d.prototype.layout=function(){},d.prototype.canFocus=function(){return!1},d.prototype.focus=function(){},d.prototype.tick=function(){},d.prototype.onClose=function(){this.delegate("onCardViewClose")}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.ComposerView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._$highlighter=null,this._$textarea=null,this._lastKnownContent="",this._lastKnownSelection=null},d.prototype._build=function(){var a=c.prototype._build.apply(this);return this._$textarea=b("<textarea></textarea>").attr({spellcheck:"false"}).keyup(this._trackChanges.bind(this)),this._$highlighter=b("<div></div>").addClass("highlighter"),a.addClass("composer").append(this._$textarea,this._$highlighter),a.on("click",b.proxy(function(){this.focus()},this)),a},d.prototype.layout=function(){var a=this._$highlighter.height()+50;this._$textarea.height(a)},d.prototype.tick=function(){this._trackChanges()},d.prototype._trackChanges=function(){var a=this.getContent(),b=this.getSelection();a!=this._lastKnownContent&&(this._lastKnownContent=a,this.delegate("onComposerViewChange",a),this.layout()),(null===b!=(null===this._lastKnownSelection)||null!==b&&!b.isEqualTo(this._lastKnownSelection))&&(this._lastKnownSelection=b,this.delegate("onComposerViewSelect",b))},d.prototype.setContent=function(a){this.getElement(),this._$textarea.val(a),this._lastKnownContent=a,setTimeout(function(){this.layout()}.bind(this),1)},d.prototype.getSelection=function(){var b=this._$textarea[0],c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd;else{var e=document.selection.createRange();e.parentElement()==b&&(c=e.startOffset,d=e.endOffset)}return c!=d?new a.Range(c,d):null},d.prototype.focus=function(){this.getElement(),this._$textarea.focus()},d.prototype.getHighlighterElement=function(){return this.getElement(),this._$highlighter},d.prototype.getContent=function(){return this.getElement(),this._$textarea.val()}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.DeckView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._MIN_COLUMN_WIDTH=350,this._CARD_MARGIN=30,this._cardViews=[],this._$columns=null,this._animated=!1,setTimeout(function(){this.layout(),this._animated=!0,this._$element.addClass("animated")}.bind(this),250)},d.prototype._build=function(){return this._$element=c.prototype._build.apply(this).attr("id","deck"),b(window).resize(function(){this.layout()}.bind(this)),this.layout(),this._$element},d.prototype.layout=function(){var a=this._$element.width(),c=Math.max(parseInt((a+this._CARD_MARGIN)/(this._MIN_COLUMN_WIDTH+this._CARD_MARGIN)),1);if(null===this._$columns||this._$columns.length!=c){for(var d=0;d<this._cardViews.length;d++)this._cardViews[d].getElement().detach();this.getElement().empty();for(var d=0;c>d;d++){var e=b("<div></div>").addClass("column").sortable({connectWith:".column",handle:".header",cancel:"a",placeholder:"card ghost",distance:10,items:"> .card",update:this.onSortableUpdate.bind(this)});this.getElement().append(e)}this._$columns=this.getElement().children(),this._distributeCardView(this._cardViews,!1)}if(this._$columns.length>1){var f=parseInt((a+this._CARD_MARGIN)/this._$columns.length);this._$columns.width(f-this._CARD_MARGIN).addClass("fixed-width")}for(var d=0;d<this._cardViews.length;d++)this._cardViews[d].layout();if(this._$columns.length>1){for(var g=0,d=0;d<this._$columns.length;d++)g=Math.max(g,this._calculateColumnHeight(d));this._$columns.height(g),this._$element.height(g)}},d.prototype._calculateColumnHeight=function(a){for(var c=b(this._$columns[a]).children(),d=0,e=0;e<c.length;e++)d+=this._CARD_MARGIN+b(c.get(e)).height()+2;return d},d.prototype._distributeCardView=function(c,d,e){if(void 0===e&&(e=!0),c instanceof a.CardView){for(var f=null,g=null,h=0;h<this._$columns.length;h++){var i=this._calculateColumnHeight(h);(null===g||g>i)&&(f=b(this._$columns[h]),g=i)}c.clearAnimations(),this._animated&&d&&c.triggerIntroAnimation(),f.append(c.getElement()),this.layout()}else if("[object Array]"===Object.prototype.toString.call(c))for(var j=c,h=0;h<j.length;h++)this._distributeCardView(j[h],d,!1);e&&this.onChange()},d.prototype._redistributeCardViews=function(){for(var a=0;a<this._cardViews.length;a++)this._cardViews[a].getElement().detach();this._distributeCardView(this._cardViews,!1)},d.prototype.addCardView=function(b){b instanceof a.CardView&&(b.setDeckView(this),this._cardViews.push(b),this._distributeCardView(b,!0))},d.prototype.removeCardView=function(a){var b=this._cardViews.indexOf(a);-1!==b&&(a.setDeckView(null),a.getElement().detach(),this._cardViews.splice(b,1),this.onChange(),this.layout())},d.prototype._mirrorCardViewOrder=function(){for(var a=[],c=this._$element.children(),d=0,e=0;e<c.length;){e=0;for(var f=0;f<c.length;f++){var g=b(c[f]).children();if(d<g.length){var h=this._findCardViewByElement(b(g[d]));a.push(h)}else e++}d++}this._cardViews=a},d.prototype._findCardViewByElement=function(a){for(var b=null,c=0;null===b&&c<this._cardViews.length;)this._cardViews[c].getElement().get(0)==a[0]&&(b=this._cardViews[c]),c++;return b},d.prototype.tick=function(){for(var a=0;a<this._cardViews.length;a++)this._cardViews[a].tick()},d.prototype.focus=function(){if(this._cardViews.length>0){for(var a=0;a<this._cardViews.length-1&&!this._cardViews[a].canFocus();)a++;this._cardViews[a].canFocus()&&this._cardViews[a].focus()}},d.prototype.onSortableUpdate=function(){this.layout(),this.onChange()},d.prototype.onChange=function(){this._mirrorCardViewOrder(),this.delegate("onDeckViewChange",this._cardViews)},d.prototype.getCardViews=function(){return this._cardViews}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.LogoView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._$canvas=null,this._content="XXX XX  X X XX XXX X XX   XX  XXX XX  X  X XXXX X X  X  X   X  X X",this._contentWidth=22,this._contentHeight=3,this._pixelSize=5,this._glitchProbability=.1},d.prototype._build=function(){var a=b("<h1></h1>");return this._$canvas=b("<canvas></canvas>").attr("width",this._contentWidth*this._pixelSize).attr("height",this._contentHeight*this._pixelSize),this.draw(!1),a.append(this._$canvas),a},d.prototype.draw=function(a){for(var b=this._$canvas.get(0).getContext("2d"),c=a?.1+.3*Math.random():0,d=0;d<this._contentHeight*this._contentWidth;d++){var e="X"==this._content[d];0!=c&&Math.random()>c&&(e=Math.random()>.5),b.fillStyle=e?"#aeaeae":"#191918",b.fillRect(d%this._contentWidth*this._pixelSize,Math.floor(d/this._contentWidth)*this._pixelSize,this._pixelSize,this._pixelSize)}},d.prototype.animateGlitch=function(){this.draw(!0),setTimeout(function(){this.draw(!0),setTimeout(function(){this.draw(!1)}.bind(this),100)}.bind(this),100)},d.prototype.tick=function(){Math.random()<this._glitchProbability&&this.animateGlitch()}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.OptionView=d,d.prototype._init=function(a){c.prototype._init.apply(this,arguments),this._option=a,this._lastKnownValue=a.getValue()},d.prototype._build=function(){var a=c.prototype._build.apply(this);return a.addClass("option").append(this._buildLabel(),this._buildField()),a},d.prototype._buildLabel=function(){return b("<label></label>").text(this._option.getLabel())},d.prototype._buildField=function(){return b("<div></div>").addClass("field")},d.prototype.getValue=function(){return null},d.prototype._applyValue=function(){},d.prototype.setValue=function(a){this._lastKnownValue=a,this._applyValue(a)},d.prototype.tick=function(){this._trackChanges()},d.prototype._trackChanges=function(){var a=this.getValue();a!=this._lastKnownValue&&(this._lastKnownValue=a,this._option.isValueValid(a)&&this._option.onOptionViewChange(this,a))}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.View,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.SideView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._logoView=null,this._hidden=!0,this._$registeredFormats=null},d.prototype._build=function(){var a=c.prototype._build.apply(this);return this._$registeredFormats=b("<ul></ul>"),a.attr("id","side").append(this.getLogoView().getElement(),this._$registeredFormats),this._hidden&&a.css("display","none"),a},d.prototype.updateRegisteredFormats=function(a){this.getElement(),this._$registeredFormats.empty();for(var c in a){var d=a[c],e=b("<li></li>").append(b("<a></a>").attr("href","javascript:void(0);").text(d.name).click(function(){this.sideView.onFormatSelect(this.Format)}.bind({sideView:this,Format:d.Format})));this._$registeredFormats.append(e)}},d.prototype.tick=function(){this._hidden||null!==this._logoView&&this._logoView.tick()},d.prototype.setHidden=function(a){this._hidden!=a&&(this._hidden=a,a?this.getElement().hide():this.getElement().show())},d.prototype.onFormatSelect=function(a){this.delegate("onSideViewClose"),setTimeout(function(){this.delegate("onSideViewFormatSelect",a)}.bind(this),500)},d.prototype.getLogoView=function(){return null===this._logoView&&(this._logoView=new a.LogoView),this._logoView}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.CardView,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.FormatCardView=d,d.prototype._init=function(a){c.prototype._init.apply(this,arguments),this._format=a,this._optionViews=[];var b=a.getOptions();for(var d in b){var e=b[d].getOptionView();this._optionViews.push(e)}},d.prototype._buildHeader=function(){return c.prototype._buildHeader.apply(this).append(b("<h3></h3>").addClass("format").text(this._format.getName()))},d.prototype._buildContent=function(){var a=c.prototype._buildContent.apply(this);if(this._optionViews.length>0){for(var d=b("<div></div>").addClass("options"),e=0;e<this._optionViews.length;e++)d.append(this._optionViews[e].getElement());a.append(d)}return a},d.prototype._buildFooter=function(){return null},d.prototype.layout=function(){},d.prototype.tick=function(){for(var a=0;a<this._optionViews.length;a++)this._optionViews[a].tick()}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.CardView,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.IntroductionCardView=d,d.prototype._build=function(){return c.prototype._build.apply(this).addClass("card-transparent")},d.prototype._buildHeader=function(){return null},d.prototype._buildContent=function(){var a=c.prototype._buildContent.apply(this);return a.addClass("content-padding").append(b("<p></p>").text("Welcome to Cryptii, an OpenSource web app where you can encrypt and decrypt content between different codes and formats with no server connection involved. Find additional formats and information by clicking on the hamburger icon on the left.")),a},d.prototype._buildFooter=function(){return null}}(Cryptii,jQuery),function(a,b){"use strict";var c=a.OptionView,d=function(){this._init.apply(this,arguments)};d.prototype=Object.create(c.prototype),a.TextOptionView=d,d.prototype._init=function(){c.prototype._init.apply(this,arguments),this._$input=null},d.prototype._buildField=function(){var a=c.prototype._buildField.apply(this);return this._$input=b("<input>").keyup(this._trackChanges.bind(this)),this._applyValue(this._lastKnownValue),a.append(this._$input),a},d.prototype.getValue=function(){return this._$input.val()},d.prototype._applyValue=function(a){this._$input.val(a)}}(Cryptii,jQuery),function(a){"use strict";var b=a.FormatCardView,c=function(){this._init.apply(this,arguments)};c.prototype=Object.create(b.prototype),a.TextFormatCardView=c,c.prototype._init=function(){b.prototype._init.apply(this,arguments),this._composerView=null},c.prototype._buildContent=function(){return b.prototype._buildContent.apply(this).append(this.getComposerView().getElement())},c.prototype.layout=function(){b.prototype.layout.apply(this,arguments),this.getComposerView().layout()},c.prototype.canFocus=function(){return!0},c.prototype.focus=function(){this.getComposerView().focus()},c.prototype.tick=function(){b.prototype.tick.apply(this,arguments),this.getComposerView().tick()},c.prototype.getComposerView=function(){return null===this._composerView&&(this._composerView=new a.ComposerView),this._composerView}}(Cryptii,jQuery);